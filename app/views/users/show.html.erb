<% provide(:title, @user.name) %>
<div class="row">
  <h1><%= @user.name %></h1>

<!--
  <aside class="span3">
    <section>
      <h1>
        <% # gravatar_for @user %>
        <%= @user.name.titleize %>
      </h1>
    </section>
  </aside>
  <div class="span9">
	<h2>History</h2>
-->


<div class="row">

  <% [3,4,5].each do |par| %>

  <div class="span4 by_par_module">

    <h3><%= "Par #{par}'s" %></h3>

    <% @par_putt_counter = 0 %>
    <% @par_putts = [] %>
    <% @par_strokes = [] %>
    <% @par_GIRs = [] %>
    <% @par_3putts = 0 %>
    <% @par_birdies = 0 %>
    <% @par_scrambles_success = 0 %>
    <% @par_scrambles_fail = 0 %>

    <% @played_holes.each do |arr| %>
      <% if arr[1].par == par %>
        <% @par_putts.push(arr[0].putts) %>
        <% @par_strokes.push(arr[0].strokes) %>
        <% @par_GIRs.push(arr[0].GIR) %>
        <% if arr[0].strokes == 2 %>
          <% @par_birdies += 1 %>
        <% end %>
        <% if arr[0].putts > 0 %>
          <% @par_putt_counter += 1 %>
          <% if arr[0].putts >= 3 %>
            <% @par_3putts += 1 %>
          <% end %>
        <% end %>
        <% if !arr[0].scramble.nil? %>
          <% if arr[0].scramble == 0 %>
            <% @par_scrambles_fail += 1%>
          <% elsif arr[0].scramble == 1 %> 
            <% @par_scrambles_success += 1%>
          <% end %>
        <% end %>
      <% end %>
    <% end %>

    <h4><%= "GIR Average: #{(@par_GIRs.reduce(:+).to_f / @par_GIRs.size).round(2)}" %></h4>
    <h4><%= "Putting Average: #{(@par_putts.reduce(:+).to_f / @par_putts.size).round(2)}" %></h4>
    <h4><%= "Stroke Average: #{(@par_strokes.reduce(:+).to_f / @par_strokes.size).round(2)}" %></h4>
    <h4><%= "Scrambling%: #{@par_scrambles_success}/#{@par_scrambles_success+@par_scrambles_fail}" %></h4>
    <h4><%= "Birdies: #{@par_birdies}/#{@par_putt_counter}" %></h4>
    <h4><%= "3+ Putts: #{@par_3putts}/#{@par_putt_counter}" %></h4>

  </div>

  <% end %>

</div>

<br><hr>












  <% @played_rounds.each do |played_round|  %>
  <% rs = played_round[2] %>
  <div class="span12" style="text-align:center;">
    <p class="played_round">
      <%= link_to played_round[1].name, round_path(played_round[0]) %>
    </p>  
    <p class="play_date">
      <%= "  |  #{time_ago_in_words(played_round[0].date_played.in_time_zone("Pacific Time (US & Canada)"))} ago" %>
    </p>
  </div>

  <div style="margin:2px 0 2px 0;"></div>

  <table class="table table-condensed table-bordered round_show">
    <thead>
      <tr>
        <th>Score</th>
        <th>Total Strokes</th>
        <th>Front 9</th>
        <th>Back 9</th>
        <th>Fairways Hit</th>
        <th>GIRs</th>
        <th>Putts</th>
        <th>Front 9</th>
        <th>Back 9</th>
        <th>Scrambling %</th>
        <th>Sand</th>
        <th>O.B.</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th><%= rs.score_to_par %></th>
        <th><%= rs.total_strokes %></th>
        <th><%= rs.front_9_strokes %></th>
        <th><%= rs.back_9_strokes %></th>
        <th><%= "#{rs.fairways_hit} / #{rs.fairways_possible}" %></th>
        <th><%= "#{rs.GIRs_hit} / #{rs.GIRs_possible}" %></th>
        <th><%= rs.total_putts %></th>
        <th><%= rs.front_9_putts %></th>
        <th><%= rs.back_9_putts %></th>
        <th><%= "#{rs.scrambles_successful} / #{rs.scrambles_possible}" %></th>
        <th><%= rs.sand_shots %></th>
        <th><%= rs.OBs %></th>
      </tr> 
    <tbody>
  </table>
  <% end %>

</div>